<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Para Nini - 2 A√±os y 2 Meses üíñ</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíñ</text></svg>">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #ff4d6d;
            --secondary: #ff758c;
            --accent: #ff0080;
            --dark: #2d3142;
            --glass: rgba(255, 255, 255, 0.92);
            --glass-dark: rgba(0, 0, 0, 0.6);
            --shadow: 0 15px 45px rgba(255, 0, 128, 0.35);
            --bg-gradient: linear-gradient(-45deg, #ff4e50, #f9d423, #ff0080, #7928ca);
        }

        body {
            font-family: 'Montserrat', sans-serif; /* Fuente m√°s legible */
            background: var(--bg-gradient);
            background-size: 400% 400%;
            animation: gradientAnimation 12s ease infinite;
            min-height: 100vh;
            color: var(--dark);
            margin: 0;
            overflow-x: hidden;
            position: relative;
        }

        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .dancing-font {
            font-family: 'Dancing Script', cursive;
        }

        /* --- PANTALLA DE LOGIN --- */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-gradient);
            background-size: 400% 400%;
            animation: gradientAnimation 8s ease infinite;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.8s ease, visibility 0.8s;
        }

        .login-content {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 2.5rem;
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            border: 1px solid rgba(255, 255, 255, 0.6);
            max-width: 400px;
            width: 85%;
            text-align: center;
        }

        .login-hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transform: scale(1.1); /* Efecto zoom al salir */
        }

        /* --- CONTADOR --- */
        .time-box {
            background: rgba(255, 255, 255, 0.95);
            padding: 12px;
            border-radius: 18px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            text-align: center;
            min-width: 85px;
            border-bottom: 4px solid var(--primary);
            transition: transform 0.3s ease;
        }
        .time-box:hover { transform: translateY(-5px); }

        .time-val {
            display: block;
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary);
            line-height: 1;
        }

        .time-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #6c757d;
            font-weight: 600;
            margin-top: 5px;
        }

        /* --- CARRUSEL MEJORADO --- */
        .carousel-inner {
            border-radius: 25px;
            background: var(--glass-dark); /* Fondo oscuro para resaltar fotos */
            height: 60vh;
            min-height: 400px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
            position: relative;
        }

        .carousel-item {
            height: 100%;
            display: flex; 
            align-items: center; 
            justify-content: center;
        }

        .carousel-item img {
            max-height: 100%;
            max-width: 100%;
            width: auto;
            height: auto;
            object-fit: contain;
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.5));
        }

        .custom-caption {
            background: rgba(255, 255, 255, 0.95);
            color: var(--primary);
            border-radius: 50px;
            padding: 10px 30px;
            bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            font-weight: 600;
        }

        /* --- ELEMENTOS FLOTANTES --- */
        .floating-element {
            position: fixed;
            pointer-events: none;
            z-index: 100;
            animation: floatAnimation linear forwards;
            font-family: "Segoe UI Emoji", "Noto Color Emoji", sans-serif;
            text-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        @keyframes floatAnimation {
            0% { transform: translateY(110vh) translateX(0) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            90% { opacity: 0.8; }
            100% { transform: translateY(-10vh) translateX(20px) rotate(360deg); opacity: 0; }
        }

        /* --- COMPONENTES UI --- */
        .music-player, .card {
            background: var(--glass);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255,255,255,0.5);
        }

        .pulse-animation {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 77, 109, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 20px rgba(255, 77, 109, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 77, 109, 0); }
        }

        /* Ajustes M√≥viles */
        @media (max-width: 768px) {
            header h1 { font-size: 2.5rem; }
            .carousel-inner { height: 50vh; min-height: 300px; }
            .time-box { min-width: 65px; padding: 8px; margin-bottom: 10px; }
            .time-val { font-size: 1.5rem; }
            .login-content { padding: 2rem 1.5rem; }
        }
    </style>
</head>
<body>

    <div id="loginScreen" class="login-overlay">
        <div class="login-content">
            <div class="mb-3">
                <span style="font-size: 4rem;" class="pulse-animation">üîí</span>
            </div>
            <h2 class="mb-2 fw-bold dancing-font" style="color: var(--primary); font-size: 2.8rem;">Hola, Nini</h2>
            <p class="mb-4 text-muted small">Para acceder a tu regalo de 2 a√±os y 2 meses, ingresa nuestra fecha especial (DDMM):</p>
            
            <div class="d-flex justify-content-center align-items-center gap-2 mb-3">
                <input type="password" id="passwordInput" class="form-control text-center fs-3 fw-bold" 
                       style="max-width: 140px; border-radius: 15px; letter-spacing: 5px; color: var(--primary);" 
                       placeholder="****" maxlength="4" autocomplete="new-password" inputmode="numeric">
                
                <button id="loginBtn" class="btn btn-danger btn-lg rounded-circle shadow pulse-animation" style="width: 50px; height: 50px; padding: 0;">
                    <i class="fas fa-heart"></i>
                </button>
            </div>
            <p id="errorMsg" class="text-danger fw-bold small" style="display:none;">
                <i class="fas fa-exclamation-circle"></i> Fecha incorrecta, intenta de nuevo amor.
            </p>
        </div>
    </div>

    <main class="container py-3" style="display:none; opacity:0; transition: opacity 1s;" id="mainContent">
        <header class="text-center py-4">
            <h1 class="display-4 fw-bold text-white dancing-font" style="text-shadow: 3px 3px 10px rgba(0,0,0,0.3);">
                Felices 2 A√±os y 2 Meses üíñ
            </h1>
            <p class="lead text-white fw-light fs-5 mt-2" style="text-shadow: 1px 1px 5px rgba(0,0,0,0.2);">
                Eres el amor de mi vida, Nini.
            </p>
        </header>

        <section class="mb-5">
            <div id="contador-amor" class="d-flex justify-content-center flex-wrap gap-2 gap-md-3">
                </div>
        </section>

        <section id="musica" class="mb-5">
            <div class="music-player text-center p-3 mx-auto" style="max-width: 600px;">
                <h6 id="songTitle" class="mb-3 text-secondary fw-bold small text-uppercase ls-1">
                    <i class="fas fa-music me-2"></i>Nuestra Playlist
                </h6>
                <audio id="backgroundMusic"></audio>
                
                <div class="controls d-flex justify-content-center align-items-center gap-4 mb-3">
                    <button id="prevButton" class="btn btn-outline-secondary btn-sm rounded-circle p-2"><i class="fas fa-step-backward"></i></button>
                    <button id="playPauseButton" class="btn btn-danger btn-lg rounded-circle shadow pulse-animation" style="width: 60px; height: 60px;">
                        <i class="fas fa-play"></i>
                    </button>
                    <button id="nextButton" class="btn btn-outline-secondary btn-sm rounded-circle p-2"><i class="fas fa-step-forward"></i></button>
                </div>
                
                <div class="d-flex align-items-center justify-content-center gap-2 px-4">
                    <i class="fas fa-volume-down text-muted small"></i>
                    <input type="range" class="form-range" id="volumeControl" min="0" max="1" step="0.01" value="0.7">
                    <i class="fas fa-volume-up text-muted small"></i>
                </div>
            </div>
        </section>

        <section id="carrusel" class="mb-5">
            <div id="photoCarousel" class="carousel slide carousel-fade shadow-lg rounded-4 overflow-hidden" data-bs-ride="carousel">
                <div class="carousel-inner" id="carouselContainer">
                    </div>
                
                <div class="carousel-caption d-none d-md-block custom-caption">
                    <p id="carouselPhrase" class="h5 mb-0 dancing-font">Cargando recuerdos...</p>
                </div>
                
                <button class="carousel-control-prev" type="button" data-bs-target="#photoCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#photoCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                </button>
            </div>
            
            <div class="text-center mt-3 d-md-none">
                <div class="bg-white bg-opacity-75 rounded-pill py-2 px-3 shadow-sm d-inline-block">
                    <p class="mb-0 dancing-font fs-4 text-danger fw-bold" id="mobilePhrase"></p>
                </div>
            </div>
        </section>

        <section class="text-center mb-5 pb-5">
            <button class="btn btn-light btn-lg shadow-lg px-5 rounded-pill fw-bold text-danger border border-2 border-danger mb-4" id="verCartaBtn" style="transition: all 0.3s;">
                <i class="fas fa-envelope-open-text me-2"></i>Ver nuestra carta üíå
            </button>
            
            <div id="cartaContent" class="card mt-2 p-4 p-md-5 text-start mx-auto" style="display:none; max-width: 800px;">
                <div class="card-body">
                    <div class="text-center mb-4">
                        <h3 class="card-title text-danger fw-bold dancing-font display-5">Mi amada Nini üåπ</h3>
                        <div class="text-muted small">15 de Febrero, 2026</div>
                    </div>
                    
                    <div class="fs-5 lh-lg" style="font-weight: 500;">
                        <p>Hoy celebramos <strong>2 a√±os y 2 meses</strong> de una historia que parece sacada de un cuento de hadas.</p>
                        <p>Desde aquel <strong>15 de diciembre de 2023</strong>, mi vida cambi√≥ para siempre. Eres mi refugio, mi compa√±era de aventuras y mi mejor amiga. No hay un solo d√≠a en que no agradezca tenerte a mi lado.</p>
                        <p>Gracias por amarme tal como soy, por tu paciencia y por cada sonrisa que me regalas. Eres mi presente y quiero que seas mi futuro siempre.</p>
                        <p>Feliz aniversario, mi amor.</p>
                    </div>
                    
                    <div class="text-end mt-5">
                        <p class="fs-4 fw-bold text-danger dancing-font">Con todo mi amor,<br>Tu Til√≠n, Pedrito. ‚ù§Ô∏è</p>
                    </div>
                </div>
            </div>

            <div class="mt-5">
                <button id="loveButton" class="btn btn-danger btn-lg rounded-pill shadow-lg pulse-animation px-5 py-3 fs-4 fw-bold">
                    ¬°M√°s Magia! ‚ú®üòò
                </button>
            </div>
        </section>
    </main>

    <footer class="text-center py-4 text-white position-relative" style="z-index: 10;">
        <small class="opacity-75">Hecho con el alma ‚ù§Ô∏è por Pedrito para Nini &bull; 2026</small>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const CONFIG = {
                START_DATE: new Date('2023-12-15T00:00:00'),
                CAROUSEL: { 
                    INTERVAL: 3500, // Un poco m√°s r√°pido
                    TOTAL_IMAGES: 120, // 120 Fotos
                    IMAGE_PATH: './img/photo' // Aseg√∫rate que sea photo1.jpg, photo2.jpg...
                },
                PHRASES: [
                    "Eres la raz√≥n por la que sonr√≠o cada d√≠a.", "Tu amor llena mi vida de colores vivos.", 
                    "Cada momento contigo es un regalo.", "Eres mi sol constante en d√≠as grises.", 
                    "Tu risa es mi melod√≠a favorita.", "A tu lado, el mundo es perfecto.",
                    "Eres mi hoy, mi ma√±ana y mi siempre.", "Amo cada peque√±o detalle de ti.", 
                    "Gracias por ser mi paz y mi fuerza.", "Nuestra historia de amor es mi favorita."
                ],
                // Genera array de 40 canciones: audio/cancion1.mp3 ...
                SONGS: Array.from({length: 40}, (_, i) => `audio/cancion${i+1}.mp3`)
            };

            /* --- 1. CONTADOR --- */
            function actualizarContador() {
                const now = new Date();
                const startDate = CONFIG.START_DATE;
                
                let years = now.getFullYear() - startDate.getFullYear();
                let months = now.getMonth() - startDate.getMonth();
                let days = now.getDate() - startDate.getDate();
                
                if (days < 0) { 
                    months--; 
                    const lastMonth = new Date(now.getFullYear(), now.getMonth(), 0); 
                    days += lastMonth.getDate(); 
                }
                if (months < 0) { 
                    years--; 
                    months += 12; 
                }

                // C√°lculo de tiempo
                const diff = now - startDate;
                const h = Math.floor((diff % 86400000) / 3600000);
                const m = Math.floor((diff % 3600000) / 60000);
                const s = Math.floor((diff % 60000) / 1000);

                document.getElementById('contador-amor').innerHTML = `
                    <div class="time-box"><span class="time-val">${years}</span><span class="time-label">A√±os</span></div>
                    <div class="time-box"><span class="time-val">${months}</span><span class="time-label">Meses</span></div>
                    <div class="time-box"><span class="time-val">${days}</span><span class="time-label">D√≠as</span></div>
                    <div class="time-box"><span class="time-val">${h}</span><span class="time-label">Hrs</span></div>
                    <div class="time-box"><span class="time-val">${m}</span><span class="time-label">Min</span></div>
                    <div class="time-box"><span class="time-val">${s}</span><span class="time-label">Seg</span></div>
                `;
            }
            setInterval(actualizarContador, 1000);
            actualizarContador();

            /* --- 2. M√öSICA --- */
            const audio = document.getElementById('backgroundMusic');
            const playBtn = document.getElementById('playPauseButton');
            let currentSong = 0;
            let isPlaying = false;

            function loadSong(idx) {
                audio.src = CONFIG.SONGS[idx];
                audio.load();
                document.getElementById('songTitle').innerHTML = `<i class="fas fa-music text-danger"></i> Canci√≥n ${idx + 1} de ${CONFIG.SONGS.length}`;
            }

            function togglePlay() {
                if(!audio.src) loadSong(0);
                if(audio.paused) {
                    audio.play().then(() => {
                        isPlaying = true;
                        playBtn.innerHTML = `<i class="fas fa-pause"></i>`;
                        playBtn.classList.remove('pulse-animation');
                    }).catch(e => console.log("Interacci√≥n requerida primero"));
                } else {
                    audio.pause();
                    isPlaying = false;
                    playBtn.innerHTML = `<i class="fas fa-play"></i>`;
                    playBtn.classList.add('pulse-animation');
                }
            }

            playBtn.onclick = togglePlay;
            document.getElementById('nextButton').onclick = () => {
                currentSong = (currentSong + 1) % CONFIG.SONGS.length;
                loadSong(currentSong); 
                if(isPlaying) audio.play();
            };
            document.getElementById('prevButton').onclick = () => {
                currentSong = (currentSong - 1 + CONFIG.SONGS.length) % CONFIG.SONGS.length;
                loadSong(currentSong);
                if(isPlaying) audio.play();
            };
            
            document.getElementById('volumeControl').oninput = (e) => audio.volume = e.target.value;
            audio.onended = () => document.getElementById('nextButton').click();

            /* --- 3. CARRUSEL OPTIMIZADO (LAZY LOADING) --- */
            const container = document.getElementById('carouselContainer');
            // Aleatorizar orden
            const ids = Array.from({length: CONFIG.CAROUSEL.TOTAL_IMAGES}, (_, i) => i + 1).sort(() => Math.random() - 0.5);
            
            ids.forEach((n, i) => {
                const div = document.createElement('div');
                // IMPORTANTE: Clase 'd-flex' para centrar verticalmente
                div.className = `carousel-item ${i === 0 ? 'active' : ''}`;
                
                // Estrategia de carga: Las primeras 2 son "eager" (inmediatas), el resto "lazy"
                const loadingMode = i < 2 ? "eager" : "lazy";
                
                // Usamos onerror para eliminar autom√°ticamente fotos que no carguen
                div.innerHTML = `
                    <img src="${CONFIG.CAROUSEL.IMAGE_PATH}${n}.jpg" 
                         class="d-block" 
                         alt="Recuerdo ${n}" 
                         loading="${loadingMode}" 
                         decoding="async"
                         onerror="this.parentElement.remove()">
                `;
                container.appendChild(div);
            });

            // Frases del carrusel
            let phraseIdx = 0;
            const updatePhrase = () => {
                const p = CONFIG.PHRASES[phraseIdx];
                document.getElementById('carouselPhrase').textContent = p;
                document.getElementById('mobilePhrase').textContent = p;
                phraseIdx = (phraseIdx + 1) % CONFIG.PHRASES.length;
            };
            
            document.getElementById('photoCarousel').addEventListener('slide.bs.carousel', updatePhrase);
            updatePhrase(); // Inicializar primera frase

            /* --- 4. ELEMENTOS FLOTANTES --- */
            function createFloatingElement() {
                // Limitamos la cantidad en pantalla para no saturar el celular
                if(document.querySelectorAll('.floating-element').length > 15) return;

                const el = document.createElement('div');
                el.classList.add('floating-element');
                const symbols = ['‚ù§', 'üíñ', 'üíï', 'ü¶ã', '‚ú®', 'üåπ']; 
                el.innerHTML = symbols[Math.floor(Math.random() * symbols.length)];
                
                el.style.left = Math.random() * 95 + 'vw';
                el.style.animationDuration = (Math.random() * 5 + 8) + 's'; // 8 a 13 segundos
                el.style.fontSize = (Math.random() * 20 + 20) + 'px'; // 20px a 40px
                
                document.body.appendChild(el);
                setTimeout(() => el.remove(), 13000);
            }
            setInterval(createFloatingElement, 800);

            /* --- 5. L√ìGICA DE ACCESO (LOGIN) --- */
            const lBtn = document.getElementById('loginBtn');
            const pInp = document.getElementById('passwordInput');
            const lScr = document.getElementById('loginScreen');
            const mainC = document.getElementById('mainContent');

            const login = () => {
                if(pInp.value === "1512") {
                    // Animaci√≥n de salida
                    lScr.classList.add('login-hidden');
                    
                    // Mostrar contenido principal
                    mainC.style.display = 'block';
                    setTimeout(() => {
                        mainC.style.opacity = '1';
                        lScr.remove();
                        // Lanzar confeti de bienvenida
                        confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
                        // Intentar reproducir m√∫sica autom√°ticamente (ya hubo interacci√≥n)
                        togglePlay();
                    }, 500);
                } else {
                    const err = document.getElementById('errorMsg');
                    err.style.display = 'block';
                    pInp.value = "";
                    pInp.focus();
                    // Vibraci√≥n si es celular
                    if(navigator.vibrate) navigator.vibrate(200);
                }
            };

            lBtn.onclick = login;
            pInp.onkeypress = (e) => { if(e.key === 'Enter') login(); };
            // Enfocar input al cargar (a veces bloqueado en m√≥viles, pero se intenta)
            setTimeout(() => pInp.focus(), 500);

            /* --- 6. INTERACCIONES UI --- */
            document.getElementById('verCartaBtn').onclick = function() {
                const c = document.getElementById('cartaContent');
                if (c.style.display === 'none') {
                    c.style.display = 'block';
                    this.innerHTML = '<i class="fas fa-eye-slash me-2"></i>Ocultar carta';
                    // Scroll suave hacia la carta
                    c.scrollIntoView({ behavior: 'smooth' });
                } else {
                    c.style.display = 'none';
                    this.innerHTML = '<i class="fas fa-envelope-open-text me-2"></i>Ver nuestra carta üíå';
                }
            };

            // Bot√≥n M√°s Magia con Emojis de Besos
            document.getElementById('loveButton').onclick = () => {
                // Explosi√≥n 1: Corazones
                confetti({ 
                    particleCount: 80, 
                    spread: 100, 
                    shapes: ['heart'], 
                    colors: ['#ff0a54', '#ff477e', '#ff7096'],
                    origin: { y: 0.6 }
                });
                
                // Explosi√≥n 2: Besos (Emojis)
                setTimeout(() => {
                    confetti({
                        particleCount: 40,
                        spread: 60,
                        scalar: 3,
                        shapes: ['emoji'],
                        shapeOptions: {
                            emoji: {
                                value: ['üòò', 'üíã', 'üíè', 'üòç']
                            }
                        },
                        origin: { y: 0.6 }
                    });
                }, 300);
            };
        });
    </script>
</body>
</html>
