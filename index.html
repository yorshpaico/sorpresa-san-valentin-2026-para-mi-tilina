<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para Nini - 2 A√±os y 2 Meses üíñ</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíñ</text></svg>">
    
    <!-- Dependencias: Bootstrap y FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    
    <style>
        :root {
            --primary: #ff4d6d;
            --secondary: #ff758c;
            --accent: #ff85a1;
            --dark: #4a4e69;
            --light: #f8f9fa;
            --glass: rgba(255, 255, 255, 0.82);
            --shadow: 0 15px 45px rgba(255, 77, 109, 0.3);
            /* Degradado m√°s vivo y rom√°ntico */
            --bg-gradient: linear-gradient(-45deg, #ff4e50, #f9d423, #ff0080, #7928ca);
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--bg-gradient);
            background-size: 400% 400%;
            animation: gradientAnimation 12s ease infinite;
            min-height: 100vh;
            color: var(--dark);
            margin: 0;
            overflow-x: hidden;
            position: relative;
        }

        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Capa de estrellas y brillos m√°gicos */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255,255,255,0.4) 1px, transparent 1px),
                radial-gradient(circle at 50% 50%, rgba(255,255,255,0.3) 2px, transparent 2px),
                radial-gradient(circle at 80% 30%, rgba(255,255,255,0.4) 1.5px, transparent 1.5px),
                radial-gradient(circle at 30% 70%, rgba(255,255,255,0.3) 1px, transparent 1px),
                radial-gradient(circle at 70% 80%, rgba(255,255,255,0.4) 2px, transparent 2px);
            background-size: 200px 200px;
            animation: twinkling 3s ease-in-out infinite alternate;
            z-index: -2;
        }

        @keyframes twinkling {
            from { opacity: 0.3; transform: scale(1); }
            to { opacity: 0.8; transform: scale(1.1); }
        }

        /* Pantalla de Login */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-gradient);
            background-size: 400% 400%;
            animation: gradientAnimation 8s ease infinite;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 1s ease, visibility 1s;
        }

        .login-content {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 3rem;
            border-radius: 35px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.4);
            max-width: 420px;
            width: 90%;
            transform: scale(1);
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .login-hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transform: scale(0.9);
        }

        /* Contador de Tiempo Estilizado */
        .time-box {
            background: rgba(255, 255, 255, 0.95);
            padding: 18px;
            border-radius: 22px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
            min-width: 95px;
            border: 2px solid #ffe5ec;
            transition: all 0.3s ease;
        }

        .time-box:hover { 
            transform: translateY(-8px) scale(1.05);
            box-shadow: var(--shadow);
        }

        .time-val {
            display: block;
            font-size: 2.2rem;
            font-weight: 900;
            color: var(--primary);
            line-height: 1;
            margin-bottom: 5px;
        }

        .time-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: #8e9aaf;
            font-weight: 700;
        }

        /* Carrusel Mejorado */
        .carousel-inner {
            border-radius: 30px;
            background: rgba(0, 0, 0, 0.2);
            height: 65vh;
            min-height: 450px;
            border: 5px solid rgba(255, 255, 255, 0.3);
        }

        .carousel-item { height: 100%; }
        .carousel-item img {
            height: 100%;
            width: 100%;
            object-fit: contain;
            display: block;
            margin: 0 auto;
            filter: drop-shadow(0 10px 30px rgba(0,0,0,0.3));
        }

        .custom-caption {
            background: rgba(255, 255, 255, 0.9);
            color: var(--dark);
            border-radius: 60px;
            padding: 12px 35px;
            bottom: 35px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border: 1.5px solid var(--primary);
            font-weight: 500;
        }

        /* Corazones Flotantes Continuos */
        .floating-heart {
            position: fixed;
            color: rgba(255, 255, 255, 0.5);
            pointer-events: none;
            z-index: -1;
            animation: floatAnimation linear forwards;
            font-family: Arial, sans-serif;
        }

        @keyframes floatAnimation {
            0% { transform: translateY(110vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            90% { opacity: 0.8; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }

        .pulse-animation {
            animation: pulse 2.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); filter: brightness(1); }
            50% { transform: scale(1.08); filter: brightness(1.1); }
        }

        .music-player, .card {
            background: var(--glass);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-radius: 30px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: var(--shadow);
        }

        header h1 {
            font-size: 3.5rem;
            text-shadow: 3px 3px 15px rgba(0,0,0,0.3);
        }

        @media (max-width: 768px) {
            header h1 { font-size: 2.2rem; }
            .carousel-inner { height: 55vh; min-height: 350px; }
            .time-box { min-width: 80px; padding: 12px; }
            .time-val { font-size: 1.6rem; }
        }
    </style>
</head>
<body>

    <!-- PANTALLA DE ACCESO (PASSWORD: 1512) -->
    <div id="loginScreen" class="login-overlay">
        <div class="login-content text-center">
            <div class="mb-4">
                <span style="font-size: 5rem;">üíñ</span>
            </div>
            <h2 class="mb-3 fw-bold" style="color: var(--primary);">Bienvenida, Nicol</h2>
            <p class="mb-4 text-muted">Escribe la fecha de nuestro aniversario (DDMM) para abrir tu regalo:</p>
            <div class="d-flex justify-content-center gap-2 mb-3">
                <input type="password" id="passwordInput" class="form-control text-center fs-3 border-danger-subtle" style="max-width: 160px; border-radius: 15px;" placeholder="****" maxlength="4" autocomplete="off">
                <button id="loginBtn" class="btn btn-danger btn-lg rounded-circle shadow pulse-animation">
                    <i class="fas fa-heart"></i>
                </button>
            </div>
            <p id="errorMsg" class="text-danger fw-bold" style="display:none;">¬°Ups! Esa no es la fecha, int√©ntalo de nuevo mi amor. üò¢</p>
        </div>
    </div>

    <!-- CONTENIDO PRINCIPAL -->
    <main class="container py-4">
        <header class="text-center py-5">
            <h1 class="display-3 fw-bold text-white">Nuestro Amor Eterno üíñ</h1>
            <p class="lead text-white fw-light fs-4" style="opacity: 0.9;">Felicidades por estos 2 a√±os y 2 meses maravillosos.</p>
        </header>

        <!-- CONTADOR -->
        <section class="mb-5 text-center">
            <div id="contador-amor" class="d-flex justify-content-center flex-wrap gap-2 gap-md-4">
                <!-- Inyectado por JS -->
            </div>
        </section>

        <!-- M√öSICA -->
        <section id="musica" class="mb-5">
            <div class="music-player text-center p-4">
                <h6 id="songTitle" class="mb-3 text-muted fst-italic">üéµ Pulsa Play para nuestra m√∫sica...</h6>
                <audio id="backgroundMusic"></audio>
                <div class="controls d-flex justify-content-center align-items-center gap-3 mb-3">
                    <button id="shuffleButton" class="btn btn-outline-danger btn-sm rounded-circle"><i class="fas fa-random"></i></button>
                    <button id="prevButton" class="btn btn-secondary btn-sm rounded-circle"><i class="fas fa-backward"></i></button>
                    <button id="playPauseButton" class="btn btn-danger btn-lg rounded-circle shadow-lg pulse-animation"><i class="fas fa-play"></i></button>
                    <button id="nextButton" class="btn btn-secondary btn-sm rounded-circle"><i class="fas fa-forward"></i></button>
                    <button id="repeatButton" class="btn btn-outline-danger btn-sm rounded-circle"><i class="fas fa-redo"></i></button>
                </div>
                <div class="volume-control w-75 mx-auto">
                    <div class="d-flex align-items-center gap-2">
                        <i class="fas fa-volume-down text-muted"></i>
                        <input type="range" class="form-range" id="volumeControl" min="0" max="1" step="0.01" value="0.5">
                        <i class="fas fa-volume-up text-muted"></i>
                    </div>
                </div>
            </div>
        </section>

        <!-- CARRUSEL -->
        <section id="carrusel" class="mb-5">
            <div id="photoCarousel" class="carousel slide shadow-lg rounded-4 overflow-hidden" data-bs-ride="carousel">
                <div class="carousel-inner" id="carouselContainer">
                    <!-- JS inyecta las fotos -->
                </div>
                <div class="carousel-caption d-none d-md-block custom-caption">
                    <p id="carouselPhrase" class="h5 mb-0">Cada foto es un recuerdo que atesoro...</p>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#photoCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#photoCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                </button>
            </div>
            <div class="text-center mt-3 d-md-none">
                <p class="lead fst-italic text-white bg-dark bg-opacity-25 rounded-pill py-2 px-3" id="mobilePhrase"></p>
            </div>
        </section>

        <!-- CARTA -->
        <section class="text-center mb-5">
            <button class="btn btn-light btn-lg shadow px-5 rounded-pill fw-bold text-danger border-2 border-danger" id="verCartaBtn">Ver nuestra carta de amor üíå</button>
            <div id="cartaContent" class="card mt-4 p-4 text-start" style="display:none; animation: fadeIn 0.8s ease-out;">
                <div class="card-body">
                    <h3 class="card-title text-center mb-4 text-danger fw-bold">Mi amada Nini üåπ</h3>
                    <p class="fs-5">Hoy celebramos <strong>2 a√±os y 2 meses</strong> de una historia que parece sacada de un cuento.</p>
                    <p class="fs-5">Desde aquel 15 de diciembre de 2023, mi vida se llen√≥ de luz. Eres mi refugio, mi mejor amiga y la persona con la que quiero compartir cada amanecer.</p>
                    <p class="fs-5">Hemos construido algo hermoso y real. Gracias por tu paciencia, tus risas y por amarme tal como soy. Eres mi presente y mi futuro asegurado.</p>
                    <p class="text-end mt-4 fs-4 fw-bold text-danger">Con todo mi ser,<br>Tu Til√≠n, Pedrito. ‚ù§Ô∏è</p>
                </div>
            </div>
        </section>

        <div class="text-center mb-5">
            <button id="loveButton" class="btn btn-danger btn-lg rounded-pill shadow-lg pulse-animation px-5 py-3 fs-4 fw-bold">
                ¬°Presiona para m√°s magia! ‚ú®üíñ
            </button>
        </div>
    </main>

    <footer class="text-center py-4 text-white">
        <small class="opacity-75">Hecho con el alma ‚ù§Ô∏è por Pedrito para Nicol &bull; 2026</small>
    </footer>

    <!-- MODAL INICIAL -->
    <div class="modal fade" id="welcomeModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content text-center p-4">
                <h2 class="mb-3 text-danger fw-bold">¬°Hola amor m√≠o! üíò</h2>
                <p class="fs-5">He preparado esta sorpresa para que nunca olvides lo mucho que te amo.</p>
                <p class="text-muted">Sube el volumen y prep√°rate para sonre√≠r...</p>
                <button type="button" class="btn btn-danger btn-lg rounded-pill px-5 py-2 mt-3" data-bs-dismiss="modal">Entrar al √Ålbum üòç</button>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // === CONFIGURACI√ìN ===
            const CONFIG = {
                START_DATE: new Date('2023-12-15T00:00:00'),
                CAROUSEL: { INTERVAL: 4500, TOTAL_IMAGES: 74, IMAGE_PATH: './img/photo' },
                PHRASES: [
                    "Eres la raz√≥n por la que sonr√≠o cada d√≠a.", "Tu amor llena mi vida de colores vivos.", "Cada momento contigo es un regalo del cielo.",
                    "Eres mi sol constante en los d√≠as nublados.", "Tu risa es la melod√≠a m√°s dulce que conozco.", "A tu lado, todo es perfecto y real.",
                    "Eres mi hoy, mi ma√±ana y mi eternidad.", "Amo cada peque√±o detalle que te hace √∫nica.", "Gracias por ser mi paz en medio del caos.",
                    "Eres mi vida, mi blanquita hermosa y valiente.", "No hay lugar mejor en el mundo que tus brazos.", "Agradezco al destino cada segundo por tenerte.",
                    "Nuestra historia de amor es mi cap√≠tulo favorito."
                ],
                SONGS: Array.from({length: 28}, (_, i) => `audio/cancion${i+1}.mp3`)
            };

            // 1. L√≥gica del Contador Preciso
            class TimeCounter {
                constructor(startDate, containerId) {
                    this.startDate = startDate;
                    this.container = document.getElementById(containerId);
                    this.start();
                }
                render() {
                    const now = new Date();
                    let years = now.getFullYear() - this.startDate.getFullYear();
                    let months = now.getMonth() - this.startDate.getMonth();
                    let days = now.getDate() - this.startDate.getDate();
                    
                    if (days < 0) { 
                        months--; 
                        const lastMonth = new Date(now.getFullYear(), now.getMonth(), 0); 
                        days += lastMonth.getDate(); 
                    }
                    if (months < 0) { 
                        years--; 
                        months += 12; 
                    }
                    
                    const diff = now - this.startDate;
                    const h = Math.floor((diff % 86400000) / 3600000);
                    const m = Math.floor((diff % 3600000) / 60000);
                    const s = Math.floor((diff % 60000) / 1000);

                    this.container.innerHTML = `
                        <div class="time-box"><span class="time-val">${years}</span><span class="time-label">A√±os</span></div>
                        <div class="time-box"><span class="time-val">${months}</span><span class="time-label">Meses</span></div>
                        <div class="time-box"><span class="time-val">${days}</span><span class="time-label">D√≠as</span></div>
                        <div class="time-box"><span class="time-val">${h}</span><span class="time-label">Hrs</span></div>
                        <div class="time-box"><span class="time-val">${m}</span><span class="time-label">Min</span></div>
                        <div class="time-box"><span class="time-val">${s}</span><span class="time-label">Seg</span></div>
                    `;
                }
                start() { this.render(); setInterval(() => this.render(), 1000); }
            }

            // 2. L√≥gica del Reproductor de M√∫sica
            class MusicPlayer {
                constructor() {
                    this.audio = document.getElementById('backgroundMusic');
                    this.playBtn = document.getElementById('playPauseButton');
                    this.title = document.getElementById('songTitle');
                    this.idx = 0;
                    this.isPlaying = false;
                    this.isShuffling = false;
                    this.init();
                }
                init() {
                    this.playBtn.onclick = () => this.toggle();
                    document.getElementById('nextButton').onclick = () => this.next();
                    document.getElementById('prevButton').onclick = () => this.prev();
                    document.getElementById('volumeControl').oninput = (e) => this.audio.volume = e.target.value;
                    document.getElementById('shuffleButton').onclick = (e) => {
                        this.isShuffling = !this.isShuffling;
                        e.currentTarget.classList.toggle('btn-danger', this.isShuffling);
                    };
                    document.getElementById('repeatButton').onclick = (e) => {
                        this.audio.loop = !this.audio.loop;
                        e.currentTarget.classList.toggle('btn-danger', this.audio.loop);
                    };
                    this.audio.onended = () => { if(!this.audio.loop) this.next(); };
                }
                load(i) {
                    this.idx = i;
                    this.audio.src = CONFIG.SONGS[i];
                    this.title.textContent = `üéµ Reproduciendo: Canci√≥n ${i + 1}`;
                }
                toggle() {
                    if(!this.audio.src) this.load(0);
                    this.isPlaying ? this.audio.pause() : this.audio.play();
                    this.isPlaying = !this.isPlaying;
                    this.playBtn.innerHTML = `<i class="fas fa-${this.isPlaying ? 'pause' : 'play'}"></i>`;
                }
                next() {
                    let n = this.isShuffling ? Math.floor(Math.random() * CONFIG.SONGS.length) : (this.idx + 1) % CONFIG.SONGS.length;
                    this.load(n); this.audio.play(); this.isPlaying = true; this.playBtn.innerHTML = `<i class="fas fa-pause"></i>`;
                }
                prev() { this.idx = (this.idx - 1 + CONFIG.SONGS.length) % CONFIG.SONGS.length; this.load(this.idx); this.audio.play(); }
            }

            // 3. L√≥gica del Carrusel Din√°mico
            class CarouselManager {
                constructor() {
                    this.cont = document.getElementById('carouselContainer');
                    this.pEl = document.getElementById('carouselPhrase');
                    this.mEl = document.getElementById('mobilePhrase');
                    this.idx = 0;
                    this.init();
                }
                init() {
                    const ids = Array.from({length: CONFIG.CAROUSEL.TOTAL_IMAGES}, (_, i) => i + 1).sort(() => Math.random() - 0.5);
                    ids.forEach((n, i) => {
                        const div = document.createElement('div');
                        div.className = `carousel-item ${i === 0 ? 'active' : ''}`;
                        div.innerHTML = `<img src="${CONFIG.CAROUSEL.IMAGE_PATH}${n}.jpg" loading="eager" onerror="this.parentElement.remove()">`;
                        this.cont.appendChild(div);
                    });
                    document.getElementById('photoCarousel').addEventListener('slide.bs.carousel', (e) => {
                        this.idx = (this.idx + (e.direction === 'left' ? 1 : -1) + CONFIG.PHRASES.length) % CONFIG.PHRASES.length;
                        const p = CONFIG.PHRASES[this.idx];
                        this.pEl.style.opacity = 0;
                        setTimeout(() => { 
                            this.pEl.textContent = p; 
                            if(this.mEl) this.mEl.textContent = p; 
                            this.pEl.style.opacity = 1; 
                        }, 250);
                    });
                    this.pEl.textContent = CONFIG.PHRASES[0];
                    if(this.mEl) this.mEl.textContent = CONFIG.PHRASES[0];
                }
            }

            // 4. Corazones Flotantes Continuos (VIDA AL FONDO)
            function createFloatingHeart() {
                const heart = document.createElement('div');
                heart.classList.add('floating-heart');
                heart.innerHTML = ['‚ù§', 'üíñ', 'üíï', 'üíó'][Math.floor(Math.random() * 4)];
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = Math.random() * 6 + 6 + 's';
                heart.style.fontSize = Math.random() * 20 + 10 + 'px';
                heart.style.opacity = Math.random() * 0.4 + 0.2;
                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), 12000);
            }
            setInterval(createFloatingHeart, 600); // Crea un coraz√≥n cada 0.6 seg

            // Inicializaci√≥n de componentes
            new TimeCounter(CONFIG.START_DATE, 'contador-amor');
            const player = new MusicPlayer();
            new CarouselManager();

            // L√≥gica de Acceso (Password: 1512)
            const lBtn = document.getElementById('loginBtn');
            const pInp = document.getElementById('passwordInput');
            const lScr = document.getElementById('loginScreen');

            const doLogin = () => {
                if(pInp.value === "1512") {
                    lScr.classList.add('login-hidden');
                    setTimeout(() => {
                        lScr.remove();
                        new bootstrap.Modal(document.getElementById('welcomeModal')).show();
                        confetti({ particleCount: 150, spread: 80, origin: { y: 0.6 }, colors: ['#ff0000', '#ff85a1', '#ffffff'] });
                        player.toggle(); // Audio inicia tras la interacci√≥n
                    }, 1000);
                } else {
                    document.getElementById('errorMsg').style.display = 'block';
                    pInp.classList.add('is-invalid');
                    setTimeout(() => pInp.classList.remove('is-invalid'), 500);
                    pInp.value = '';
                }
            };

            lBtn.onclick = doLogin;
            pInp.onkeypress = (e) => { if(e.key === 'Enter') doLogin(); };
            setTimeout(() => pInp.focus(), 800);

            // Bot√≥n de Carta
            document.getElementById('verCartaBtn').onclick = function() {
                const c = document.getElementById('cartaContent');
                const isH = c.style.display === 'none';
                c.style.display = isH ? 'block' : 'none';
                this.textContent = isH ? 'Ocultar carta üôà' : 'Ver nuestra carta de amor üíå';
                if(isH) c.scrollIntoView({ behavior: 'smooth' });
            };

            // Bot√≥n Lluvia de Amor (Confetti)
            document.getElementById('loveButton').onclick = () => {
                confetti({ 
                    particleCount: 100, 
                    spread: 160, 
                    shapes: ['heart'], 
                    colors: ['#ff4757', '#ff6b81', '#ffffff'],
                    scalar: 2
                });
            };
        });
    </script>
</body>
</html>
