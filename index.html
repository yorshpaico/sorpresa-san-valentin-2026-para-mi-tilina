<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para Nini - 2 A√±os y 2 Meses üíñ</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíñ</text></svg>">
    
    <!-- Dependencias: Bootstrap y FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    
    <style>
        :root {
            --primary: #ff4d6d;
            --secondary: #ff758c;
            --dark: #4a4e69;
            --light: #f8f9fa;
            --glass: rgba(255, 255, 255, 0.85);
            --shadow: 0 15px 45px rgba(255, 77, 109, 0.25);
            --bg-gradient: linear-gradient(-45deg, #ff9a9e, #fad0c4, #fbc2eb, #a18cd1);
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--bg-gradient);
            background-size: 400% 400%;
            animation: gradientAnimation 15s ease infinite;
            min-height: 100vh;
            color: var(--dark);
            margin: 0;
            overflow-x: hidden;
            position: relative;
        }

        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Capa de estrellas brillantes */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 30%, white 1px, transparent 1px),
                radial-gradient(circle at 70% 10%, white 2px, transparent 2px),
                radial-gradient(circle at 40% 80%, white 1px, transparent 1px),
                radial-gradient(circle at 90% 60%, white 2px, transparent 2px),
                radial-gradient(circle at 15% 75%, white 1px, transparent 1px);
            background-size: 250px 250px;
            animation: twinkling 4s ease-in-out infinite alternate;
            z-index: -1;
            opacity: 0.4;
        }

        @keyframes twinkling {
            from { opacity: 0.2; transform: scale(1); }
            to { opacity: 0.6; transform: scale(1.05); }
        }

        /* Pantalla de Login */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-gradient);
            background-size: 400% 400%;
            animation: gradientAnimation 10s ease infinite;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.8s ease, visibility 0.8s;
        }

        .login-content {
            background: var(--glass);
            backdrop-filter: blur(15px);
            padding: 2.5rem;
            border-radius: 30px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.5);
            max-width: 400px;
            width: 90%;
        }

        .login-hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        /* Contador de Tiempo */
        .time-box {
            background: white;
            padding: 15px;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
            text-align: center;
            min-width: 85px;
            border: 1.5px solid #ffe5ec;
            transition: transform 0.3s;
        }

        .time-box:hover { transform: translateY(-5px); }

        .time-val {
            display: block;
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary);
        }

        .time-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            color: #8e9aaf;
            font-weight: 700;
        }

        /* Carrusel Responsivo */
        .carousel-inner {
            border-radius: 25px;
            background: rgba(0, 0, 0, 0.05);
            height: 60vh;
            min-height: 400px;
        }

        .carousel-item { height: 100%; }
        .carousel-item img {
            height: 100%;
            width: 100%;
            object-fit: contain;
            display: block;
            margin: 0 auto;
            filter: drop-shadow(0 8px 20px rgba(0,0,0,0.15));
        }

        .custom-caption {
            background: rgba(255, 255, 255, 0.95);
            color: var(--dark);
            border-radius: 50px;
            padding: 10px 25px;
            bottom: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 1px solid #ffccd5;
        }

        /* Elementos Flotantes */
        .floating-heart {
            position: fixed;
            color: rgba(255, 255, 255, 0.6);
            pointer-events: none;
            z-index: -1;
            animation: floatAnimation linear forwards;
        }

        @keyframes floatAnimation {
            0% { transform: translateY(105vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }

        .pulse-animation {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .music-player, .card {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            border: none;
            box-shadow: var(--shadow);
        }

        @media (max-width: 768px) {
            .carousel-inner { height: 50vh; min-height: 300px; }
            .time-box { min-width: 70px; padding: 10px; }
            .time-val { font-size: 1.4rem; }
        }
    </style>
</head>
<body>

    <!-- PANTALLA DE ACCESO (PASSWORD: 1512) -->
    <div id="loginScreen" class="login-overlay">
        <div class="login-content text-center">
            <h1 class="display-1 mb-3">üîí</h1>
            <h2 class="mb-3 text-danger">Solo para Nini</h2>
            <p class="mb-4 text-muted">Escribe nuestra fecha de aniversario (DDMM):</p>
            <div class="d-flex justify-content-center gap-2 mb-3">
                <input type="password" id="passwordInput" class="form-control text-center fs-4" style="max-width: 140px;" placeholder="1512" maxlength="4" autocomplete="off">
                <button id="loginBtn" class="btn btn-danger btn-lg rounded-circle">
                    <i class="fas fa-heart"></i>
                </button>
            </div>
            <p id="errorMsg" class="text-warning fw-bold" style="display:none;">Esa no es la fecha... üò¢</p>
        </div>
    </div>

    <!-- CONTENIDO PRINCIPAL -->
    <main class="container py-4">
        <header class="text-center py-5">
            <h1 class="display-3 fw-bold text-white" style="text-shadow: 2px 2px 10px rgba(0,0,0,0.2);">Felices 2 A√±os y 2 Meses üíñ</h1>
            <p class="lead text-white fw-light">Eres mi hoy, mi ma√±ana y mi siempre.</p>
        </header>

        <!-- CONTADOR -->
        <section class="mb-5 text-center">
            <div id="contador-amor" class="d-flex justify-content-center flex-wrap gap-2 gap-md-3">
                <!-- Inyectado por JS -->
            </div>
        </section>

        <!-- M√öSICA -->
        <section id="musica" class="mb-5">
            <div class="music-player text-center p-4">
                <h6 id="songTitle" class="mb-3 text-muted fst-italic">üéµ Esperando para reproducir...</h6>
                <audio id="backgroundMusic"></audio>
                <div class="controls d-flex justify-content-center align-items-center gap-3 mb-3">
                    <button id="shuffleButton" class="btn btn-outline-danger btn-sm rounded-circle"><i class="fas fa-random"></i></button>
                    <button id="prevButton" class="btn btn-secondary btn-sm rounded-circle"><i class="fas fa-backward"></i></button>
                    <button id="playPauseButton" class="btn btn-danger btn-lg rounded-circle shadow pulse-animation"><i class="fas fa-play"></i></button>
                    <button id="nextButton" class="btn btn-secondary btn-sm rounded-circle"><i class="fas fa-forward"></i></button>
                    <button id="repeatButton" class="btn btn-outline-danger btn-sm rounded-circle"><i class="fas fa-redo"></i></button>
                </div>
                <div class="volume-control w-75 mx-auto">
                    <input type="range" class="form-range" id="volumeControl" min="0" max="1" step="0.01" value="0.5">
                </div>
            </div>
        </section>

        <!-- CARRUSEL -->
        <section id="carrusel" class="mb-5">
            <div id="photoCarousel" class="carousel slide shadow-lg rounded-4 overflow-hidden" data-bs-ride="carousel">
                <div class="carousel-inner" id="carouselContainer">
                    <!-- JS inyecta las fotos -->
                </div>
                <div class="carousel-caption d-none d-md-block custom-caption">
                    <p id="carouselPhrase" class="h5 mb-0">Un momento inolvidable...</p>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#photoCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#photoCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                </button>
            </div>
            <div class="text-center mt-3 d-md-none">
                <p class="lead fst-italic text-white" id="mobilePhrase"></p>
            </div>
        </section>

        <!-- CARTA -->
        <section class="text-center mb-5">
            <button class="btn btn-light btn-lg shadow-sm px-5 rounded-pill" id="verCartaBtn">Leer Nuestra Carta üíå</button>
            <div id="cartaContent" class="card mt-4 p-4 text-start" style="display:none;">
                <div class="card-body">
                    <h3 class="card-title text-center mb-4 text-danger">Mi querida Nini üåπ</h3>
                    <p>Hoy celebramos <strong>2 a√±os y 2 meses</strong> de una historia incre√≠ble que empez√≥ aquel 15 de diciembre.</p>
                    <p>Gracias por ser mi compa√±era, mi confidente y mi mejor amiga. Hemos construido recuerdos que atesorar√© eternamente.</p>
                    <p>Eres mi presente y mi futuro. Te amo con todo mi ser, blanquita hermosa.</p>
                    <p class="text-end mt-4"><strong>Con todo mi amor,<br>Tu Til√≠n, Pedrito.</strong></p>
                </div>
            </div>
        </section>

        <div class="text-center mb-5">
            <button id="loveButton" class="btn btn-danger btn-lg rounded-pill shadow-lg pulse-animation px-4">
                ¬°Lluvia de Amor! üíñ
            </button>
        </div>
    </main>

    <footer class="text-center py-4 text-white">
        <small>Hecho con ‚ù§Ô∏è para Nini &bull; 2026</small>
    </footer>

    <!-- MODAL INICIAL -->
    <div class="modal fade" id="welcomeModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content text-center p-4">
                <h2 class="mb-3 text-danger">¬°Hola mi amor! üíò</h2>
                <p>He preparado este espacio para celebrar lo nuestro.</p>
                <p>Sube el volumen y disfruta de nuestros recuerdos...</p>
                <button type="button" class="btn btn-danger rounded-pill px-5 py-2" data-bs-dismiss="modal">Entrar üòç</button>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // === CONFIGURACI√ìN ===
            const CONFIG = {
                START_DATE: new Date('2023-12-15T00:00:00'),
                CAROUSEL: { INTERVAL: 4500, TOTAL_IMAGES: 74, IMAGE_PATH: './img/photo' },
                PHRASES: [
                    "Eres la raz√≥n por la que sonr√≠o cada d√≠a.", "Tu amor llena mi vida de colores.", "Cada momento contigo es un regalo.",
                    "Eres mi sol en los d√≠as nublados.", "Tu risa es la melod√≠a m√°s hermosa.", "Contigo todo es perfecto.",
                    "Eres mi hoy, mi ma√±ana y mi siempre.", "Amo cada detalle de ti.", "Gracias por ser mi paz.",
                    "Eres mi vida blanquita hermosa.", "No hay lugar mejor que tus brazos.", "Agradezco al destino por ti.",
                    "Nuestra historia es mi favorita."
                ],
                SONGS: Array.from({length: 28}, (_, i) => `audio/cancion${i+1}.mp3`)
            };

            // 1. Contador
            class TimeCounter {
                constructor(startDate, containerId) {
                    this.startDate = startDate;
                    this.container = document.getElementById(containerId);
                    this.start();
                }
                render() {
                    const now = new Date();
                    let years = now.getFullYear() - this.startDate.getFullYear();
                    let months = now.getMonth() - this.startDate.getMonth();
                    let days = now.getDate() - this.startDate.getDate();
                    if (days < 0) { months--; const lastMonth = new Date(now.getFullYear(), now.getMonth(), 0); days += lastMonth.getDate(); }
                    if (months < 0) { years--; months += 12; }
                    const diff = now - this.startDate;
                    const h = Math.floor((diff % 86400000) / 3600000);
                    const m = Math.floor((diff % 3600000) / 60000);
                    const s = Math.floor((diff % 60000) / 1000);
                    this.container.innerHTML = `
                        <div class="time-box"><span class="time-val">${years}</span><span class="time-label">A√±os</span></div>
                        <div class="time-box"><span class="time-val">${months}</span><span class="time-label">Meses</span></div>
                        <div class="time-box"><span class="time-val">${days}</span><span class="time-label">D√≠as</span></div>
                        <div class="time-box"><span class="time-val">${h}</span><span class="time-label">Hrs</span></div>
                        <div class="time-box"><span class="time-val">${m}</span><span class="time-label">Min</span></div>
                        <div class="time-box"><span class="time-val">${s}</span><span class="time-label">Seg</span></div>
                    `;
                }
                start() { this.render(); setInterval(() => this.render(), 1000); }
            }

            // 2. M√∫sica
            class MusicPlayer {
                constructor() {
                    this.audio = document.getElementById('backgroundMusic');
                    this.playBtn = document.getElementById('playPauseButton');
                    this.title = document.getElementById('songTitle');
                    this.idx = 0;
                    this.isPlaying = false;
                    this.isShuffling = false;
                    this.init();
                }
                init() {
                    this.playBtn.onclick = () => this.toggle();
                    document.getElementById('nextButton').onclick = () => this.next();
                    document.getElementById('prevButton').onclick = () => this.prev();
                    document.getElementById('volumeControl').oninput = (e) => this.audio.volume = e.target.value;
                    document.getElementById('shuffleButton').onclick = (e) => {
                        this.isShuffling = !this.isShuffling;
                        e.currentTarget.classList.toggle('btn-danger', this.isShuffling);
                    };
                    this.audio.onended = () => this.next();
                }
                load(i) {
                    this.idx = i;
                    this.audio.src = CONFIG.SONGS[i];
                    this.title.textContent = `üéµ Reproduciendo: Canci√≥n ${i + 1}`;
                }
                toggle() {
                    if(!this.audio.src) this.load(0);
                    this.isPlaying ? this.audio.pause() : this.audio.play();
                    this.isPlaying = !this.isPlaying;
                    this.playBtn.innerHTML = `<i class="fas fa-${this.isPlaying ? 'pause' : 'play'}"></i>`;
                }
                next() {
                    let n = this.isShuffling ? Math.floor(Math.random() * CONFIG.SONGS.length) : (this.idx + 1) % CONFIG.SONGS.length;
                    this.load(n); this.audio.play(); this.isPlaying = true; this.playBtn.innerHTML = `<i class="fas fa-pause"></i>`;
                }
                prev() { this.idx = (this.idx - 1 + CONFIG.SONGS.length) % CONFIG.SONGS.length; this.load(this.idx); this.audio.play(); }
            }

            // 3. Carrusel
            class CarouselManager {
                constructor() {
                    this.cont = document.getElementById('carouselContainer');
                    this.pEl = document.getElementById('carouselPhrase');
                    this.mEl = document.getElementById('mobilePhrase');
                    this.idx = 0;
                    this.init();
                }
                init() {
                    const ids = Array.from({length: CONFIG.CAROUSEL.TOTAL_IMAGES}, (_, i) => i + 1).sort(() => Math.random() - 0.5);
                    ids.forEach((n, i) => {
                        const div = document.createElement('div');
                        div.className = `carousel-item ${i === 0 ? 'active' : ''}`;
                        div.innerHTML = `<img src="${CONFIG.CAROUSEL.IMAGE_PATH}${n}.jpg" onerror="this.parentElement.remove()">`;
                        this.cont.appendChild(div);
                    });
                    document.getElementById('photoCarousel').addEventListener('slide.bs.carousel', (e) => {
                        this.idx = (this.idx + (e.direction === 'left' ? 1 : -1) + CONFIG.PHRASES.length) % CONFIG.PHRASES.length;
                        const p = CONFIG.PHRASES[this.idx];
                        this.pEl.style.opacity = 0;
                        setTimeout(() => { this.pEl.textContent = p; if(this.mEl) this.mEl.textContent = p; this.pEl.style.opacity = 1; }, 200);
                    });
                    this.pEl.textContent = CONFIG.PHRASES[0];
                }
            }

            // 4. Corazones Flotantes
            function createHeart() {
                const heart = document.createElement('div');
                heart.classList.add('floating-heart');
                heart.innerHTML = '‚ù§';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = Math.random() * 5 + 5 + 's';
                heart.style.fontSize = Math.random() * 20 + 10 + 'px';
                heart.style.opacity = Math.random() * 0.5 + 0.2;
                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), 10000);
            }
            setInterval(createHeart, 800);

            // Inicializaci√≥n
            new TimeCounter(CONFIG.START_DATE, 'contador-amor');
            const player = new MusicPlayer();
            new CarouselManager();

            // L√≥gica de Acceso (Password: 1512)
            const lBtn = document.getElementById('loginBtn');
            const pInp = document.getElementById('passwordInput');
            const lScr = document.getElementById('loginScreen');

            const doLogin = () => {
                if(pInp.value === "1512") {
                    lScr.classList.add('login-hidden');
                    setTimeout(() => {
                        lScr.remove();
                        new bootstrap.Modal(document.getElementById('welcomeModal')).show();
                        confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
                        player.toggle(); // Inicia m√∫sica al entrar
                    }, 800);
                } else {
                    document.getElementById('errorMsg').style.display = 'block';
                    pInp.classList.add('is-invalid');
                    setTimeout(() => pInp.classList.remove('is-invalid'), 500);
                }
            };

            lBtn.onclick = doLogin;
            pInp.onkeypress = (e) => { if(e.key === 'Enter') doLogin(); };
            setTimeout(() => pInp.focus(), 600);

            // Otros Eventos
            document.getElementById('verCartaBtn').onclick = function() {
                const c = document.getElementById('cartaContent');
                const isH = c.style.display === 'none';
                c.style.display = isH ? 'block' : 'none';
                this.textContent = isH ? 'Ocultar Carta üôà' : 'Leer Nuestra Carta üíå';
                if(isH) c.scrollIntoView({ behavior: 'smooth' });
            };
            document.getElementById('loveButton').onclick = () => {
                confetti({ particleCount: 100, spread: 360, shapes: ['heart'], colors: ['#ff4757', '#ff6b81'] });
            };
        });
    </script>
</body>
</html>
